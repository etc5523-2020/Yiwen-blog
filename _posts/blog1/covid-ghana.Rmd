---
title: "COVID-19 analysis for Ghana"
description: |
  Welcome to our new blog, This is the anlaysis of COVID-19 for Ghana, mainly focusing on the confirmed case numbers. Hope you can enjoy reading what I share and display!
author:
  - name: Yiwen Zhang 

date: 09-03-2020
output:
  distill::distill_article:
    self_contained: false
bibliography: references.bib
biblio-style: authoryear-comp
---

# Data description
The  data is get from R package `coronavirus`[@coronavirus] provided by RamiKrispin, which contains daily summary of the Corona virus (COVID-19) cases (confirmed, death, and recovered) by state/province with seven variables. This data set is originally collected and cleaned by the Johns Hopkins University Center for Systems Science and Engineering (JHU CCSE) [@mappingCOVID-19] . In my blog, Ghana is chosen as my target country, whose data consists of 576 observations during 2020-01-22 and 2020-07-31.

# Data Analysis

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
library(coronavirus)
library(tidyverse)
library(DT)
library(formattable)
library(plotly)
library(lubridate)
library(knitr)
library(dplyr)
library(sparkline)
library(reactable)
library(htmltools)
library(kableExtra)
data("coronavirus")

```

```{r filterdata}
covid_ghana <- coronavirus %>%
  filter(country == "Ghana") 
```

```{r pivotwider}
covid_ghana_wider <- covid_ghana %>%
  select("date","country","type","cases") %>%
group_by(type) %>%
  pivot_wider(names_from = "type", values_from = "cases") %>%
  mutate(confirmed_sum = cumsum(confirmed), death_sum = cumsum(death), recovered_sum = cumsum(recovered)) 
```

```{r summary}
summary_ghana <- covid_ghana_wider %>%
  summarise(avg_death = mean(death), avg_confirmed = mean(confirmed), avg_recovered = mean(recovered)) %>%
  pivot_longer(c("avg_death", "avg_confirmed","avg_recovered"), names_to = "type", values_to = "avg") 
```

```{r table1, echo=FALSE}
kable(summary_ghana,
      booktabs = TRUE, 
      caption = "The average death,confirmed and recovered cases in Ghana") %>%
  kable_styling(bootstrap_options = c("striped", "hover"), 
                full_width = F,
                latex_options = c("hold_position"))
```

```{r COVID19cases, echo=FALSE}
p1 <- covid_ghana %>%
  ggplot(aes(x = date,
             color = type,
             group = type)) +
  geom_line(aes(y = cases))+
  theme(axis.title.x = element_blank(),
        axis.text.x = element_blank(),
        axis.ticks.x = element_blank())

ggplotly(p1)
``` 

```{r}
datatable(covid_ghana_wider, 
          escape = FALSE,
          filter = 'top',
          caption = htmltools::tags$caption( style = 'caption-side: top; text-align: center; color:pink; padding-bottom: 20px; font-size:220% ;','Case number of COVID-19 in Ghana'),
          options = list(paging = TRUE, 
                         columnDefs = list(list(className = 'dt-center', targets = 3:5)),
                         fnDrawCallback = htmlwidgets::JS(
  '
function(){
  HTMLWidgets.staticRender();
}
'
)
       )) %>%
  spk_add_deps()
```


