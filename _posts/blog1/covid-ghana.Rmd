---
title: "COVID-19 analysis for Ghana"
description: |
  Welcome to our new blog, This is the anlaysis of COVID-19 for Ghana, mainly focusing on the confirmed case numbers. Hope you can enjoy reading what I share and display!
author:
  - name: Yiwen Zhang 

date: 09-03-2020
output:
  distill::distill_article:
    self_contained: false
bibliography: references.bib
biblio-style: authoryear-comp
---

# Introduction
At the beginning of 2020, COVID-19 was first found and broke out in Wuhan, China. Then, the disease rapidly spread and broke out in more than 188 countries and regions around the world. In this blog, I focus on the spread and control of COVID-19 in Ghana, an African country. I'll show you the story behind the numbers through two tables and one graph.

# Data description
The  data is get from R package `coronavirus`[@coronavirus] provided by RamiKrispin, which contains daily summary of the Corona virus (COVID-19) cases (confirmed, death, and recovered) by state/province with seven variables. This data set is originally collected and cleaned by the Johns Hopkins University Center for Systems Science and Engineering (JHU CCSE) [@mappingCOVID-19] . In my blog, Ghana is chosen as my target country, whose data consists of 576 observations during 2020-01-22 and 2020-07-31.

# Data Analysis

In this section, I will explore the spread and control of covid-19 in Ghana by analyzing single day confirmed cases, deaths and rehabilitation cases in Ghana. An interactive table will also be provided for readers to explore data by themselves.
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
library(coronavirus)
library(tidyverse)
library(DT)
library(formattable)
library(plotly)
library(lubridate)
library(knitr)
library(dplyr)
library(reactable)
library(kableExtra)
library(sparkline)
data("coronavirus")

```

```{r filterdata}
covid_ghana <- coronavirus %>%
  filter(country == "Ghana") 
```

```{r pivotwider}
covid_ghana_wider <- covid_ghana %>%
  select("date","country","type","cases") %>%
group_by(type) %>%
  pivot_wider(names_from = "type", values_from = "cases") %>%
  mutate(confirmed_sum = cumsum(confirmed), death_sum = cumsum(death), recovered_sum = cumsum(recovered)) 
```

```{r summary}
summary_ghana <- covid_ghana_wider %>%
  summarise(avg_death = mean(death), avg_confirmed = mean(confirmed), avg_recovered = mean(recovered)) %>%
  pivot_longer(c("avg_death", "avg_confirmed","avg_recovered"), names_to = "type", values_to = "avg") 
```

Figure \@ref(fig:table1) shows that the average value of single day death cases, confirmed cases and recovered cases are 0.948, 184.901 and 167.167 respectively(including 3 decimal places). First of all, we can see that the number of newly confirmed cases in a single day in Ghana is relatively small, less than 1. This means that the spread of COVID-19 in Ghana is not very serious. Secondly, from the number of deaths and recovered cases, it can be seen that the cure rate in Ghana is good, so we could infer that Ghana has done a good job in controlling the epidemic situation.

```{r table1, fig.cap="The average death,confirmed and recovered cases in Ghana"}
datatable(summary_ghana, 
          escape = FALSE,
          caption = htmltools::tags$caption( style = 'caption-side: top; text-align: center; color:blue; padding-bottom: 20px; font-size:220% ;','The average cases in Ghana'),
          options = list(paging = FALSE, 
                         dom = "t",
                         columnDefs = list(list(className = 'dt-center')),
                         fnDrawCallback = htmlwidgets::JS(
  '
function(){
  HTMLWidgets.staticRender();
}
'
)
       )) %>%
  spk_add_deps()
```


In Figure \@ref(fig:COVID19cases), we could see the day-by-day trend of the number of three cases over time. The green line represents the death cases, the red line represents the confirmed cases and the blue ling represents the recovered cases. It can be seen that the number of deaths has been maintained at a stable level close to zero, which indicates that the death number in Ghana is low. At the beginning of the COVID-19, it can be seen that the number of confirmed cases in a single day is gradually increasing, while the number of recovered cases is very low. This is because the initial stage still belongs to the period of transmission and outbreak of the disease, and its treatment also needs a certain period of time. Therefore, we can see that the number of confirmed cases in the middle stage has decreased, while the recovered cases have a small peak, which is a signal of a breakthrough in epidemic control. Finally, in the late stage, the number of confirmed cases further decreased and the number of recovered cases increased, indicating that the epidemic situation has been under a more stable control.


```{r COVID19cases, echo=FALSE,fig.cap="Sing day change of the case number over time"}
p1 <- covid_ghana %>%
  ggplot(aes(x = date,
             color = type,
             group = type)) +
  geom_line(aes(y = cases))+
  ggtitle("Single day change of the case number over time")+
  theme(axis.title.x = element_blank(),
        axis.text.x = element_blank(),
        axis.ticks.x = element_blank())

ggplotly(p1)
``` 



In Figure \@ref(fig:interactive), reader can explore the data by self. 



```{r interactive,fig.cap="Case number of COVID-19 in Ghana"}
datatable(covid_ghana_wider, 
          escape = FALSE,
          filter = 'top',
          caption = htmltools::tags$caption( style = 'caption-side: top; text-align: center; color:pink; padding-bottom: 20px; font-size:220% ;','Case number of COVID-19 in Ghana'),
          options = list(paging = TRUE, 
                         pageLength = 9,
                         columnDefs = list(list(className = 'dt-center', targets = 3:5)),
                         fnDrawCallback = htmlwidgets::JS(
  '
function(){
  HTMLWidgets.staticRender();
}
'
)
       )) %>%
  spk_add_deps()
```

# Conclusion


# Acknowledgments

Thanks for the providers of these packages used as follows:


- plotly [@plotly]

- tidyverse [@tidyverse]

- lubridate [@lubridate] 

- kableExtra [@kableExtra]

- DT [@DT]

- dplyr [@dplyr]

- knitr [@knitr]

- formattable [@formattable]

- reactable [@reactable]

- coronavirus [@coronavirus]

- sparkline [@sparkline]